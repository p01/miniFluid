for(C of(x=y=a=[],O.value))++x,C<" "?x=!++y:C>" "&&a.push({x,y,C,w:"#"==C,u:0,v:0});M=t=>a.map((x=>{for(q of(x.t=.1,x.s=0,t||(x.D=x.w),a))!((g=Math.hypot(e=x.x-q.x,f=x.y-q.y)/2-1)<0)||(t?(g/=x.D,x.t+=(f*(z=3-x.D-q.D)+x.v-q.v)*g,x.s+=(e*z+x.u-q.u)*g):x.D+=g*g)})),setInterval`M(c.width^=M());for(p of a)with(p)c.getContext("2d").fillText(C,3*x,5*y),w||(y+=v+=t/4,x+=u+=s/2)`